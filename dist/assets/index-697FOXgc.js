(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();(function(){const n="2025-11-26T08:00:00+01:00",o=new Date(n),s=document.getElementById("days"),i=document.getElementById("hours"),e=document.getElementById("minutes"),t=document.getElementById("seconds");function r(d){return String(d).padStart(2,"0")}function c(){let l=Math.max(0,o-new Date);if(l<=0){s.textContent="0",i.textContent="00",e.textContent="00",t.textContent="00",document.querySelector(".title").textContent="Die AP2 Winter 2025 hat begonnen!",clearInterval(a);return}const g=Math.floor(l/1e3)%60,h=Math.floor(l/(1e3*60))%60,v=Math.floor(l/(1e3*60*60))%24,I=Math.floor(l/(1e3*60*60*24));s.textContent=I,i.textContent=r(v),e.textContent=r(h),t.textContent=r(g)}c();const a=setInterval(c,1e3)})();const E={apiKey:"AIzaSyB0byNuFhk_TPemYQ1cRWb_CrQWIpmf4F0",authDomain:"ap2-counter.firebaseapp.com",databaseURL:"https://ap2-counter-default-rtdb.europe-west1.firebasedatabase.app",projectId:"ap2-counter",storageBucket:"ap2-counter.firebasestorage.app",messagingSenderId:"81773484806",appId:"1:81773484806:web:3480f0e18dae1a2251dc87"};firebase.initializeApp(E);const x=firebase.database(),b=x.ref("votes"),B=localStorage.getItem("ap2_voted")==="true",m=document.getElementById("send"),p=document.getElementById("status"),C=document.getElementById("beruf"),S=document.getElementById("showVote"),w=document.getElementById("showResults"),u=document.querySelector(".vote-box"),f=document.querySelector(".results-box");S.addEventListener("click",()=>{u.style.display==="block"?u.style.display="none":(u.style.display="block",f.style.display="none")});w.addEventListener("click",()=>{f.style.display==="block"?f.style.display="none":(f.style.display="block",u.style.display="none",F())});const y=document.getElementById("gefühl"),L=document.getElementById("score");y.addEventListener("input",()=>{L.textContent=y.value});B?(m.disabled=!0,p.textContent="Du hast bereits abgestimmt!"):m.addEventListener("click",()=>{const n=C.value,o=Number(y.value);b.push({beruf:n,gefühl:o,timestamp:Date.now()}).then(()=>{localStorage.setItem("ap2_voted","true"),m.disabled=!0,p.textContent="Danke für deine Stimme!"}).catch(s=>{console.error(s),p.textContent="Fehler beim Absenden. Bitte versuche es erneut."})});function D(n){return n===0?"Keine Stimmen":n<2?"Totally fucked":n<4?"Geht so":n<6?"Neutral":n<8?"Gut":"WE GONNA ACE IT"}function F(){b.once("value",n=>{const o=n.val(),s=document.getElementById("resultsContent");if(s.innerHTML="",!o){s.textContent="Noch keine Stimmen.";return}let i={FISI:0,FIAE:0,FIDV:0,FIDP:0},e={FISI:0,FIAE:0,FIDV:0,FIDP:0},t=0;for(let c in o){const a=o[c];i.hasOwnProperty(a.beruf)?(i[a.beruf]+=Number(a.gefühl),e[a.beruf]++,t++):console.warn("Ungültiger Beruf:",a.beruf)}const r=document.createElement("div");r.classList.add("total-votes"),r.textContent=`Insgesamt abgegebene Stimmen: ${t}`,s.appendChild(r);for(let c in i){const a=e[c]?(i[c]/e[c]).toFixed(1):0,d=a/10*100,l=document.createElement("div");l.classList.add("result-item"),l.innerHTML=`
                <div class="label">${c} - ${D(a)}</div>
                <div class="value">${a}/10 (${e[c]} Stimmen)</div>
                <div class="bar" style="width:${d}%"></div>
            `,s.appendChild(l)}})}
